<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AdvancedUsername's UI</title>
<style>
  /* --- Reset & Body --- */
  body {
    margin: 0; padding: 0;
    height: 100vh; display: flex; justify-content: center; align-items: center;
    background: linear-gradient(135deg, #1e003a, #4a007d);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: white;
    user-select: none;
  }

  /* --- Cube Container --- */
  #app {
    background: #2c0052;
    width: 320px;
    padding: 25px 30px;
    border-radius: 16px;
    box-shadow:
      4px 4px 10px rgba(74,0,125,0.5),
      inset 0 0 10px rgba(255,255,255,0.1);
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  /* --- Titles --- */
  #app h1 {
    font-size: 1.6rem;
    margin: 0 0 10px 0;
    text-align: center;
    letter-spacing: 1.5px;
  }

  /* --- Inputs with cube style --- */
  input[type="text"], input[type="password"] {
    width: 100%;
    padding: 10px 12px;
    background: #370076;
    border: 3px solid transparent;
    border-radius: 12px;
    color: white;
    font-size: 1rem;
    box-shadow:
      2px 2px 6px #4a007d,
      inset 0 0 6px #a955ff;
    transition: border 0.3s ease;
  }
  input[type="text"]:focus, input[type="password"]:focus {
    outline: none;
    border-color: #b37cff;
  }

  /* --- Buttons --- */
  button {
    background: #7f39fb;
    border: none;
    padding: 12px 0;
    border-radius: 14px;
    color: white;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 3px 7px #b37cff;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #9c5eff;
  }

  /* --- Notification --- */
  #notification {
    background: #4a007d;
    padding: 10px;
    border-radius: 12px;
    font-weight: 600;
    text-align: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s ease;
  }
  #notification.show {
    opacity: 1;
    pointer-events: auto;
  }

  /* --- Main UI --- */
  #mainUI {
    display: none;
    flex-direction: column;
    gap: 20px;
  }

  /* --- Currency display --- */
  #logCash {
    font-size: 1.3rem;
    font-weight: bold;
    text-align: center;
  }

  /* --- Shop buttons --- */
  .shop-button {
    background: linear-gradient(135deg, #4a007d, #a955ff);
    box-shadow: 0 3px 10px #b37cff;
  }

</style>
</head>
<body>
<div id="app">
  <h1>AdvancedUsername's UI</h1>

  <div id="authUI">
    <input type="text" id="username" placeholder="Username" autocomplete="off" />
    <input type="password" id="password" placeholder="Password" autocomplete="off" />
    <button id="signupBtn">Sign Up</button>
    <button id="loginBtn">Log In</button>
  </div>

  <div id="notification"></div>

  <div id="mainUI">
    <div id="logCash">LogCash: 0</div>
    <button class="shop-button" id="goToRoblox">Go to roblox.com/login</button>
    <button class="shop-button" id="goToGoogle">Go to Google</button>
  </div>
</div>

<script type="module">
  // --- Firebase imports ---
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import {
    getDatabase, ref, get, set, child, push, query, orderByChild, equalTo
  } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBjA2O3QDuKsAGLzq008VEDug69WDroulI",
    authDomain: "supercoollogin999.firebaseapp.com",
    databaseURL: "https://supercoollogin999-default-rtdb.firebaseio.com",
    projectId: "supercoollogin999",
    storageBucket: "supercoollogin999.firebasestorage.app",
    messagingSenderId: "472488806884",
    appId: "1:472488806884:web:a2ef5e6a2660a36ac51ff1",
    measurementId: "G-6HSSSTQHMS"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // UI elements
  const usernameInput = document.getElementById("username");
  const passwordInput = document.getElementById("password");
  const signupBtn = document.getElementById("signupBtn");
  const loginBtn = document.getElementById("loginBtn");
  const notification = document.getElementById("notification");
  const authUI = document.getElementById("authUI");
  const mainUI = document.getElementById("mainUI");
  const logCashDisplay = document.getElementById("logCash");
  const goToRobloxBtn = document.getElementById("goToRoblox");
  const goToGoogleBtn = document.getElementById("goToGoogle");

  let currentUser = null;
  let logCash = 0;

  // Show notification helper
  function showNotification(msg, success = true) {
    notification.textContent = msg;
    notification.style.backgroundColor = success ? "#4caf50" : "#e74c3c";
    notification.classList.add("show");
    setTimeout(() => notification.classList.remove("show"), 3000);
  }

  // Check if username exists
  async function usernameExists(name) {
    const dbRef = ref(db);
    const q = query(ref(db, "users"), orderByChild("username"), equalTo(name));
    const snapshot = await get(q);
    return snapshot.exists();
  }

  // Add new user to DB
  async function addUser(name, pass) {
    const usersRef = ref(db, "users");
    const newUserRef = push(usersRef);
    await set(newUserRef, {
      username: name,
      password: pass,
      logCash: 2 // Starting currency for new account
    });
  }

  // Get total accounts count for a username (for LogCash logic)
  async function getAccountsByUsername(name) {
    const q = query(ref(db, "users"), orderByChild("username"), equalTo(name));
    const snapshot = await get(q);
    if (!snapshot.exists()) return 0;
    return Object.keys(snapshot.val()).length;
  }

  // Sign Up function
  signupBtn.addEventListener("click", async () => {
    const name = usernameInput.value.trim();
    const pass = passwordInput.value;

    if (!name || !pass) {
      showNotification("Please enter username & password.", false);
      return;
    }

    if (await usernameExists(name)) {
      showNotification("Username already taken.", false);
      return;
    }

    try {
      await addUser(name, pass);
      showNotification("Account created! Logging in...");
      loginUser(name, pass);
    } catch {
      showNotification("Failed to create account.", false);
    }
  });

  // Login function
  loginBtn.addEventListener("click", async () => {
    const name = usernameInput.value.trim();
    const pass = passwordInput.value;

    if (!name || !pass) {
      showNotification("Please enter username & password.", false);
      return;
    }

    const q = query(ref(db, "users"), orderByChild("username"), equalTo(name));
    const snapshot = await get(q);
    if (!snapshot.exists()) {
      showNotification("User not found.", false);
      return;
    }

    let loggedInUser = null;
    snapshot.forEach((childSnap) => {
      const data = childSnap.val();
      if (data.password === pass) {
        loggedInUser = { id: childSnap.key, ...data };
      }
    });

    if (loggedInUser) {
      showNotification("Logged in successfully!");
      loginUser(loggedInUser.username, loggedInUser.password, loggedInUser.id, loggedInUser.logCash);
    } else {
      showNotification("Wrong password.", false);
    }
  });

  // After login: show main UI
  function loginUser(name, pass, userId = null, existingLogCash = 2) {
    currentUser = { name, pass, userId };
    logCash = existingLogCash || 2;
    logCashDisplay.textContent = `LogCash: ${logCash}`;

    authUI.style.display = "none";
    mainUI.style.display = "flex";

    // Clear inputs
    usernameInput.value = "";
    passwordInput.value = "";
  }

  // Buttons for external links
  goToRobloxBtn.onclick = () => window.open("https://www.roblox.com/login", "_blank");
  goToGoogleBtn.onclick = () => window.open("https://www.google.com", "_blank");

</script>
</body>
</html>